!function(e,t){"function"==typeof define&&define.amd?define([],function(){return t(e)}):"object"==typeof exports?module.exports=t(e):e.VanillaBox=t(e)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,function(e){"use strict";var t={animation:"",imageListeners:!0,screenControls:!0},n=function(){var e={},t=!1,s=0,a=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],s++);for(var i=function(s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t&&"[object Object]"===Object.prototype.toString.call(s[a])?e[a]=n(!0,e[a],s[a]):e[a]=s[a])};s<a;s++){i(arguments[s])}return e},s=function(e,t){e.classList.remove("fadeIn");for(var n=0;n<e.children.length;n++){var s=e.children[n];s.classList.contains("vb-image-container")||s.classList.contains("vb-desc-container")||(t?(s.classList.remove("fadeIn"),s.classList.add("fadeOut")):(s.classList.remove("fadeOut"),s.classList.add("fadeIn")))}return t},a=function(e){e.classList.remove("fadeIn"),e.classList.add("fadeOut")},i=function(e){e.classList.remove("fadeOut"),e.classList.add("fadeIn")};return function(e,o){var r,c,l,d,v,u,f,m,p={},g=!1,h=[],b=[],L=!1;return p.init=function(e,s){f=n(t,s||{});for(var a,i,o=e.getElementsByTagName("img"),y=this,I=0;I<o.length;I++){var x=o[I].dataset.vbHighRes||o[I].src;h.push(x),b.push(o[I].dataset.vbCaption),o[I].dataset.vbIndex=I,f.imageListeners&&o[I].addEventListener("click",function(){m=null,y.open(this.dataset.vbIndex)})}return o.length<=1&&(f.screenControls=!1),r=function(e){var t=document.createElement("div");t.className="vb-overlay";var n=document.createElement("div");n.className="vb-image-container",t.appendChild(n);var s=document.createElement("div");s.className="vb-desc-container";var a=document.createElement("span");return a.className="vb-desc-text",s.appendChild(a),t.appendChild(s),e.screenControls&&(t.innerHTML+='<div class="vb-previous-area"><svg class ="vb-previous" width="35px" height="90px"> <polyline class="vb-arrow"  points="30,1 2.5,41 30,81" stroke="rgba(200,200,200,0.7)" stroke-width="5" fill="none" stroke-linejoin="round"/> </svg></div>',t.innerHTML+='<div class="vb-next-area"><svg class ="vb-next" width="35px" height="90px"><polyline class="vb-arrow" points="1,1 31,41 1,81" stroke="rgba(200,200,200,0.7)" stroke-width="5" fill="none" stroke-linejoin="round"/></svg></div>'),t.innerHTML+='<div class="vb-close-area"><svg class ="vb-close" width="35px" height="35px"><polyline class="vb-x" points="1,1 34,34" stroke="rgba(200,200,200,0.9)" stroke-width="4" fill="none" stroke-linejoin="round"/><polyline class="vb-x" points="34,1 1,34" stroke="rgba(200,200,200,0.9)" stroke-width="4" fill="none" stroke-linejoin="round"/></svg></div>',t}(f),c=r.getElementsByClassName("vb-image-container")[0],l=r.getElementsByClassName("vb-desc-container")[0],d=r.getElementsByClassName("vb-desc-text")[0],v=r.getElementsByClassName("vb-next-area")[0],u=r.getElementsByClassName("vb-previous-area")[0],r.addEventListener("touchstart",function(e){a=e.touches[0].clientX}),r.addEventListener("touchend",function(e){i=e.changedTouches[0].clientX,function(e,t,n){var s=t-e;s>70?n.previousItem():s<-70&&n.nextItem()}(a,i,y)}),document.addEventListener("keydown",function(e){var t=e.keyCode;g&&function(e,t){switch(e){case 39:t.nextItem();break;case 37:t.previousItem();break;case 27:t.close();break;default:;}}(t,y)}),r.addEventListener("click",function(e){"img"!=e.target.tagName.toLowerCase()?y.close():y.toggleControls()}),f.screenControls&&(v.addEventListener("click",function(e){L||(e.cancelBubble=!0,y.nextItem())}),u.addEventListener("click",function(e){L||(e.cancelBubble=!0,y.previousItem())})),p},p.showItem=function(e){if(e||(e=0),m!=e){var t=document.createElement("img");return t.src=h[e],b[e]?(l.classList.contains("fadeOut")&&!L&&i(l),d.innerHTML=b[e]):b[e]||g?a(l):(a(l),d.innerHTML=""),m=parseInt(e),s=t,(n=c).innerHTML="",s.classList.add("fadeIn"),n.appendChild(s),!0}var n,s;return!1},p.open=function(e){e||(e=0),L=s(r,!1),r.classList.remove("fadeOut"),c.innerHTML="",this.showItem(e),(r=document.body.appendChild(r)).classList.toggle("fadeIn"),g=!0},p.close=function(){!function(e){e.classList.remove("fadeIn"),e.classList.add("fadeOut"),setTimeout(function(){document.body.removeChild(e)},250)}(r),g=!1},p.hideControls=function(){L=s(r,!0),a(l)},p.toggleControls=function(){(L=s(r,!L))?a(l):b[m]&&i(l)},p.nextItem=function(){if(h.length){var e=m+1;e==h.length&&(e=0),this.showItem(e)}},p.previousItem=function(){if(h.length){var e=m-1;e<0&&(e=h.length-1),this.showItem(e)}},p.init(e,o),p}});